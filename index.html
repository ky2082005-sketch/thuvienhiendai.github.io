<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá th·ªëng Qu·∫£n l√Ω Th∆∞ vi·ªán</title>
    <link rel="stylesheet" href="CSS/style.css">
</head>

<body>

<script>
    if (localStorage.getItem("loggedIn") !== "true") {
        window.location.href = "login.html";
    }
</script>

<!-- USER MENU -->
<div class="user-menu">
    <div class="user-info-box" onclick="toggleMenu()">
        <img class="user-avatar" src="https://cdn-icons-png.flaticon.com/512/3177/3177440.png">
        <span id="usernameTop" class="user-name"></span>
        <span class="arrow-down">‚ñº</span>
    </div>

    <div class="menu-dropdown" id="menuDropdown">
        <button onclick="openProfile()">H·ªì s∆° c√° nh√¢n</button>
        <button onclick="changePassword()">ƒê·ªïi m·∫≠t kh·∫©u</button>
        <button onclick="logout()">ƒêƒÉng xu·∫•t</button>
    </div>
</div>
    <div class="logout-container">
        <button class="logout-btn" onclick="logout()">ƒêƒÉng xu·∫•t</button>
    </div>
    <div class="user-info">
    üëã Xin ch√†o, <span id="usernameDisplay"></span>
    </div>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">üìö</span>
                    <h1>Th∆∞ vi·ªán Hi·ªán ƒë·∫°i</h1>
                </div>
                <p class="subtitle">Kh√°m ph√° tri th·ª©c - N√¢ng t·∫ßm t∆∞∆°ng lai</p>
            </div>
        </header>

        <!-- Stats Section -->
        <div class="stats-section">
            <div class="stat-card">
                <div class="stat-icon">üìñ</div>
                <div class="stat-info">
                    <div class="stat-number" id="totalBooks">0</div>
                    <div class="stat-label">T·ªïng s·ªë s√°ch</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üìö</div>
                <div class="stat-info">
                    <div class="stat-number" id="totalCategories">0</div>
                    <div class="stat-label">Th·ªÉ lo·∫°i</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">‚≠ê</div>
                <div class="stat-info">
                    <div class="stat-number" id="newestYear">2024</div>
                    <div class="stat-label">NƒÉm m·ªõi nh·∫•t</div>
                </div>
            </div>
        </div>

        <!-- Search and Filter Section -->
        <div class="search-section">
            <div class="search-box">
                <span class="search-icon">üîç</span>
                <input type="text" id="searchInput" placeholder="T√¨m ki·∫øm theo t√™n s√°ch ho·∫∑c t√°c gi·∫£...">
            </div>
            <div class="filter-box">
                <select id="categoryFilter">
                    <option value="">üìÇ T·∫•t c·∫£ th·ªÉ lo·∫°i</option>
                    <option value="VƒÉn h·ªçc">üìñ VƒÉn h·ªçc</option>
                    <option value="Khoa h·ªçc">üî¨ Khoa h·ªçc</option>
                    <option value="L·ªãch s·ª≠">üìú L·ªãch s·ª≠</option>
                    <option value="K·ªπ nƒÉng">üí° K·ªπ nƒÉng</option>
                    <option value="Thi·∫øu nhi">üé® Thi·∫øu nhi</option>
                    <option value="Kinh t·∫ø">üí∞ Kinh t·∫ø</option>
                    <option value="C√¥ng ngh·ªá">üíª C√¥ng ngh·ªá</option>
                </select>
            </div>
            <button class="btn-add" id="btnShowAddForm">
                <span class="btn-icon">‚ûï</span>
                Th√™m s√°ch m·ªõi
            </button>
        </div>

        <!-- Add Book Form -->
        <div class="form-container" id="addFormContainer">
            <div class="form-card">
                <div class="form-header">
                    <h2>üìù Th√™m s√°ch m·ªõi</h2>
                    <button class="close-btn" id="btnCancelAdd">‚úï</button>
                </div>
                <form id="addBookForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="bookTitle">T√™n s√°ch *</label>
                            <input type="text" id="bookTitle" required placeholder="Nh·∫≠p t√™n s√°ch">
                        </div>
                        <div class="form-group">
                            <label for="bookAuthor">T√°c gi·∫£ *</label>
                            <input type="text" id="bookAuthor" required placeholder="Nh·∫≠p t√™n t√°c gi·∫£">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="bookCategory">Th·ªÉ lo·∫°i *</label>
                            <select id="bookCategory" required>
                                <option value="">Ch·ªçn th·ªÉ lo·∫°i</option>
                                <option value="VƒÉn h·ªçc">VƒÉn h·ªçc</option>
                                <option value="Khoa h·ªçc">Khoa h·ªçc</option>
                                <option value="L·ªãch s·ª≠">L·ªãch s·ª≠</option>
                                <option value="K·ªπ nƒÉng">K·ªπ nƒÉng</option>
                                <option value="Thi·∫øu nhi">Thi·∫øu nhi</option>
                                <option value="Kinh t·∫ø">Kinh t·∫ø</option>
                                <option value="C√¥ng ngh·ªá">C√¥ng ngh·ªá</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="bookYear">NƒÉm xu·∫•t b·∫£n *</label>
                            <input type="number" id="bookYear" min="1900" max="2025" required placeholder="2024">
                            <label for="bookStatus">Tr·∫°ng th√°i *</label>
                                    <select id="bookStatus" required>
                                    <option value="">Ch·ªçn tr·∫°ng th√°i</option>
                                    <option value="C√≤n">C√≤n</option>
                                    <option value="H·∫øt">H·∫øt</option>
                                    <option value="S·∫Øp c√≥">S·∫Øp c√≥</option>
                                </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="bookImage">·∫¢nh b√¨a s√°ch</label>
                        <div class="file-input-wrapper">
                            <input type="file" id="bookImage" accept="image/*">
                            <label for="bookImage" class="file-input-label">
                                <span class="file-icon">üìÅ</span>
                                Ch·ªçn ·∫£nh b√¨a s√°ch
                            </label>
                        </div>
                        <div class="image-preview" id="imagePreview"></div>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn-submit">
                            <span>‚úì</span> Th√™m s√°ch
                        </button>
                        <button type="button" class="btn-cancel" id="btnCancelAddBottom">
                            <span>‚úï</span> H·ªßy
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Books Grid -->
        <div class="books-section">
            <div class="books-header">
                <h2>üìö B·ªô s∆∞u t·∫≠p s√°ch</h2>
                <div class="view-toggle">
                    <button class="view-btn active" data-view="grid" title="Xem d·∫°ng l∆∞·ªõi">
                        <span>‚äû</span>
                    </button>
                    <button class="view-btn" data-view="list" title="Xem d·∫°ng danh s√°ch">
                        <span>‚ò∞</span>
                    </button>
                </div>
            </div>
            <div class="books-grid" id="booksGrid">
                <!-- Books will be dynamically added here -->
            </div>
        </div>

        <!-- Edit Modal -->
        <div class="modal" id="editModal">
            <div class="modal-content">
                <div class="form-header">
                    <h2>‚úèÔ∏è Ch·ªânh s·ª≠a th√¥ng tin s√°ch</h2>
                    <button class="close-btn" id="closeModal">‚úï</button>
                </div>
                <form id="editBookForm">
                    <input type="hidden" id="editBookId">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editBookTitle">T√™n s√°ch *</label>
                            <input type="text" id="editBookTitle" required>
                        </div>
                        <div class="form-group">
                            <label for="editBookAuthor">T√°c gi·∫£ *</label>
                            <input type="text" id="editBookAuthor" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editBookCategory">Th·ªÉ lo·∫°i *</label>
                            <select id="editBookCategory" required>
                                <option value="">Ch·ªçn th·ªÉ lo·∫°i</option>
                                <option value="VƒÉn h·ªçc">VƒÉn h·ªçc</option>
                                <option value="Khoa h·ªçc">Khoa h·ªçc</option>
                                <option value="L·ªãch s·ª≠">L·ªãch s·ª≠</option>
                                <option value="K·ªπ nƒÉng">K·ªπ nƒÉng</option>
                                <option value="Thi·∫øu nhi">Thi·∫øu nhi</option>
                                <option value="Kinh t·∫ø">Kinh t·∫ø</option>
                                <option value="C√¥ng ngh·ªá">C√¥ng ngh·ªá</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editBookYear">NƒÉm xu·∫•t b·∫£n *</label>
                            <input type="number" id="editBookYear" min="-5000" max="2025">
                            <label for="editBookStatus">Tr·∫°ng th√°i *</label>
                            <select id="editBookStatus" required>
                                <option value="C√≤n">C√≤n</option>
                                <option value="H·∫øt">H·∫øt</option>
                                <option value="S·∫Øp c√≥">S·∫Øp c√≥</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="editBookImage">·∫¢nh b√¨a s√°ch m·ªõi (ƒë·ªÉ tr·ªëng n·∫øu kh√¥ng ƒë·ªïi)</label>
                        <div class="file-input-wrapper">
                            <input type="file" id="editBookImage" accept="image/*">
                            <label for="editBookImage" class="file-input-label">
                                <span class="file-icon">üìÅ</span>
                                Ch·ªçn ·∫£nh m·ªõi
                            </label>
                        </div>
                        <div class="image-preview" id="editImagePreview"></div>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn-submit">
                            <span>‚úì</span> L∆∞u thay ƒë·ªïi
                        </button>
                        <button type="button" class="btn-cancel" id="btnCancelEdit">
                            <span>‚úï</span> H·ªßy
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script type="module" src="./script.js"></script>
    <script type="module" src="JS/script.js"></script> 
        
    
    <!-- MODAL XEM CHI TI·∫æT -->
    <div class="modal" id="detailModal">
        <div class="modal-content detail-card">

            <button class="close-btn" id="closeDetailModal">‚úï</button>

            <div class="detail-left">
                <img id="detailImage" alt="">
            </div>

            <div class="detail-right">
                <h2 id="detailTitle"></h2>
                <p><strong>‚úçÔ∏è T√°c gi·∫£:</strong> <span id="detailAuthor"></span></p>
                <p><strong>üìÇ Th·ªÉ lo·∫°i:</strong> <span id="detailCategory"></span></p>
                <p><strong>üìÖ NƒÉm xu·∫•t b·∫£n:</strong> <span id="detailYear"></span></p>
                <p><strong>üì¶ S·ªë l∆∞·ª£ng:</strong> <span id="detailQuantity"></span></p>
                <p><strong>üìò Tr·∫°ng th√°i:</strong> <span id="detailStatus"></span></p>

                <button id="btnEditFromDetail" class="btn-submit">‚úèÔ∏è S·ª≠a s√°ch</button>
                <button id="btnReadBook" class="btn-primary">üìñ ƒê·ªçc s√°ch</button>

                    <div id="bookReadingArea" class="reading-area" style="display:none;">
                        <h3>üìò N·ªôi dung s√°ch</h3>
                    <div id="readingContent"></div>
            </div>
        </div>
    </div>
<script>
    // Set username
    document.getElementById("usernameTop").textContent =
        localStorage.getItem("currentUser");

    // Dropdown
    function toggleMenu() {
        const menu = document.getElementById("menuDropdown");
        menu.style.display = menu.style.display === "block" ? "none" : "block";
    }

    // Click outside to close
    document.addEventListener("click", function (e) {
        if (!e.target.closest(".user-menu")) {
            document.getElementById("menuDropdown").style.display = "none";
        }
    });

    function openProfile() { alert("üöÄ H·ªì s∆° c√° nh√¢n ƒëang c·∫≠p nh·∫≠t!"); }
    function changePassword() { alert("üîê T√≠nh nƒÉng s·∫Øp c√≥!"); }
</script>

<!-- FILE JS -->
<script src="JS/script.js" type="module"></script>
<script src="auth.js"></script>

</body>
</html>
